if(!window.criteo_q||window.criteo_q instanceof Array){var oldQueue=window.criteo_q||[];window.criteo_q=function(){var e={initialized:!1,queue:[],actions:[],disingScheduled:[],accounts:[]},d={tagVersion:"2.0.1",handlerUrlPrefix:("https:"===document.location.protocol?"https://sslwidget.":"http://widget.")+"criteo.com/event",handlerResponseType:"single",handlerParams:{v:"2.0.1"},manualDising:!1,manualFlush:!1,disOnce:!1,eventMap:{viewitem:"vp",viewhome:"vh",viewlist:"vl",viewbasket:"vb",viewsearch:"vs",
tracktransaction:"vc",calldising:"dis",setdata:"exd"},propMap:{event:"e",account:"a",product:"p",item:"p","item.id":"i","item.price":"pr","item.quantity":"q","product.id":"i","product.price":"pr","product.quantity":"q",data:"d",keywords:"kw",checkin_date:"din",checkout_date:"dout",deduplication:"dd",user_segment:"si",new_customer:"nc",customer_id:"ci"},setters:{seturl:{cfg:"handlerUrlPrefix",evt:"url"},setaccount:{cfg:"account",evt:"account"},setcalltype:{cfg:"handlerResponseType",evt:"type"},oninitialized:{cfg:"onInitialized",
evt:"callback"},beforeappend:{cfg:"beforeAppend",evt:"callback"},aftereval:{cfg:"afterEval",evt:"callback"},onflush:{cfg:"onFlush",evt:"callback"}},flags:{disonce:"disOnce",manualdising:"manualDising",manualflush:"manualFlush",nopartialflush:"noPartialFlush"}},r=function(){for(var a=[],b=e.queue,c=0;c<b.length;++c){var g=b[c];if(g instanceof Array)b.splice.apply(b,[c+1,0].concat(g));else if(g instanceof Function)b.splice(c+1,0,g());else if(g&&"[object Object]"===g.toString())switch(h(g)){case 0:a.push(g);
break;case -1:a=a.concat(b.slice(c)),c=b.length}}d.afterEval instanceof Function&&(a=d.afterEval(b,a,e,d));e.queue=a||[];!d.manualFlush&&(!d.noPartialFlush||0===e.queue.length)&&q()},h=function(a){if(!e.initialized&&a.requiresDOM&&"no"!==a.requiresDOM)return"blocking"===a.requiresDOM?-1:0;delete a.requiresDOM;if(!a.event)return l(a),1;a.account&&m(a.account,e.accounts);a.event=a.event.toLowerCase();switch(a.event){case "tracktransaction":a.id||(a.id="no_id_"+Math.floor(99999999999*Math.random()));
break;case "setparameter":for(var b in a)"event"!==b.toLowerCase()&&a.hasOwnProperty(b)&&(d.handlerParams[b]=a[b]);return 1;case "calldising":a.hasOwnProperty("account")||(a.account=e.accounts);b=d.handlerResponseType;a.hasOwnProperty("type")&&(b=a.type,delete a.type);m(a.account,e.disingScheduled);"sequential"===b&&(a.dc=!0);break;case "setcustomerid":return a.event="setdata",a.customer_id=a.id,delete a.id,h(a);case "setsitetype":b="d";if("mobile"===a.type||"m"===a.type)b="m";if("tablet"===a.type||
"t"===a.type)b="t";a.event="setdata";delete a.type;a.site_type=b;return h(a);case "appendtag":if(e.initialized&&!d.container){b=document.body;var c=document.createElement("div");c.setAttribute("id","criteo-tags-div");c.style.display="none";b.appendChild(c);d.container=c}d.beforeAppend instanceof Function&&(a.element=d.beforeAppend(a.element,e,d));if(a.element)if(!d.container&&"script"===a.element.tagName.toLowerCase())b=document.getElementsByTagName("script")[0],a.element.setAttribute("data-owner",
"criteo-tag"),b.parentNode.insertBefore(a.element,b);else if(d.container)d.container.appendChild(a.element);else return 0;return 1;case "gettagstate":return a.callback instanceof Function?a.callback(e,d):1;case "flush":case "flushevents":return q(),1}if(b=d.setters[a.event])return d[b.cfg]=a[b.evt],1;if(b=d.flags[a.event])return d[b]=!0,1;e.actions.push(l(a));return 1},q=function(){d.onFlush instanceof Function&&(e.actions=d.onFlush(e.actions,e,d));if(0!==e.actions.length){if(!d.manualDising){for(var a=
[],b=0;b<e.accounts.length;++b)n(e.disingScheduled,e.accounts[b])||a.push(e.accounts[b]);0<a.length&&h({event:"callDising",account:a})}a=e.actions;b=[];1===e.accounts.length&&(d.account=e.accounts[0]);d.account&&b.push("a="+k(d.account,[]));if(d.handlerParams){var c=decodeURIComponent(k(d.handlerParams,[]));c&&b.push(c)}for(c=0;c<a.length;++c)a[c].account&&p(d.account,a[c].account)&&delete a[c].account,b.push("p"+c+"="+k(a[c],[]));a=b.join("&");b=document.createElement("script");b.setAttribute("async",
"true");b.setAttribute("type","text/javascript");b.setAttribute("src",d.handlerUrlPrefix+"?"+a);e.actions=[];h({event:"appendTag",element:b});d.disOnce||(e.disingScheduled=[])}},l=function(a){if(a instanceof Function)return a=a(),a instanceof Function?a:l(a);if(a instanceof Array)for(var b=0;b<a.length;++b)a[b]=l(a[b]);else if(a&&"[object Object]"===a.toString())for(b in a)a.hasOwnProperty(b)&&(a[b]=l(a[b]));return a},s=function(a,b){var c=b.join(".");return d.propMap[c]?d.propMap[c]:a},p=function(a,
b){if(!(a instanceof Array))return p([a],b);if(!(b instanceof Array))return p(a,[b]);if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(!n(b,a[c]))return!1;return!0},k=function(a,b){var c="";if(a instanceof Function)c=k(a(),b);else if(a instanceof Array){for(var e=[],f=0;f<a.length;++f)e[f]=k(a[f],b);c+="["+e.join(",")+"]"}else if(a&&"[object Object]"===a.toString()){e=[];for(f in a)if(a.hasOwnProperty(f)){var h=b.concat([f]);e.push(s(f,h)+"="+k(a[f],h))}c+=e.join("&")}else c=1===b.length&&
"event"===b[0]?c+(d.eventMap[a.toLowerCase()]?d.eventMap[a.toLowerCase()]:a):c+a;return encodeURIComponent(c)},m=function(a,b){if(a instanceof Array)for(var c=0;c<a.length;++c)m(a[c],b);else n(b,a)||b.push(a)},n=function(a,b){for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};(function(a,b){if("complete"!==a.readyState){var c=!1,d=a.onload,e=a.onreadystatechange;a.onload=a.onreadystatechange=function(){e instanceof Function&&e();if(!c&&(!a.readyState||"loaded"===a.readyState||"complete"===
a.readyState))d instanceof Function&&d(),c=!0,b()}}else b()})(document,function(){e.initialized=d.onInitialized instanceof Function?d.onInitialized(e,d):!0;r()});return{push:function(){for(var a=0;a<arguments.length;++a)e.queue.push(arguments[a]);r()}}}();window.criteo_q.push.apply(window.criteo_q,oldQueue)};